cmake_minimum_required(VERSION 2.8.9)
find_package(YARP REQUIRED)
include_directories(${YARP_INCLUDE_DIRS})

find_package(YCM REQUIRED)
include(YCMDefaultDirs)

find_package(iDynTree REQUIRED)

yarp_idl_to_dir("${CMAKE_CURRENT_SOURCE_DIR}/thrift/XsensFrame.thrift" "${CMAKE_CURRENT_BINARY_DIR}/autogenerated/data" THRIFT_SOURCES THRIFT_HEADERS THRIFT_INCLUDE_DIRS)
yarp_idl_to_dir("${CMAKE_CURRENT_SOURCE_DIR}/thrift/XsensDriverService.thrift" "${CMAKE_CURRENT_BINARY_DIR}/autogenerated/services" THRIFT_SERVICE_SOURCES THRIFT_SERVICE_HEADERS THRIFT_SERVICE_INCLUDE_DIRS)

add_library(yarpModuleLib ${THRIFT_SOURCES} ${THRIFT_HEADERS} ${THRIFT_SERVICE_SOURCES} ${THRIFT_SERVICE_HEADERS})
target_include_directories(yarpModuleLib PUBLIC ${THRIFT_INCLUDE_DIRS} ${THRIFT_SERVICE_INCLUDE_DIRS})

include_directories(include)

add_executable(xsens-tf-bridge src/xsens-tf-bridge.cpp)

target_link_libraries(xsens-tf-bridge ${YARP_LIBRARIES} yarpModuleLib)

target_include_directories(xsens-tf-bridge PUBLIC ${THRIFT_INCLUDE_DIRS} ${THRIFT_SERVICE_INCLUDE_DIRS})