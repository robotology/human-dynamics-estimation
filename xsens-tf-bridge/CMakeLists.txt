cmake_minimum_required(VERSION 2.8.9)
find_package(YARP REQUIRED)

yarp_idl_to_dir("${CMAKE_CURRENT_SOURCE_DIR}/thrift/XsensFrame.thrift" "${CMAKE_CURRENT_BINARY_DIR}/autogenerated/data" THRIFT_SOURCES THRIFT_HEADERS THRIFT_INCLUDE_DIRS)
yarp_idl_to_dir("${CMAKE_CURRENT_SOURCE_DIR}/thrift/XsensDriverService.thrift" "${CMAKE_CURRENT_BINARY_DIR}/autogenerated/services" THRIFT_SERVICE_SOURCES THRIFT_SERVICE_HEADERS THRIFT_SERVICE_INCLUDE_DIRS)

add_library(thriftLibrary ${THRIFT_SOURCES} ${THRIFT_HEADERS} ${THRIFT_SERVICE_SOURCES} ${THRIFT_SERVICE_HEADERS})
target_link_libraries(thriftLibrary YARP::YARP_OS)
target_include_directories(thriftLibrary SYSTEM PUBLIC include ${THRIFT_INCLUDE_DIRS} ${THRIFT_SERVICE_INCLUDE_DIRS} ${YARP_INCLUDE_DIRS})

add_executable(xsens-tf-bridge src/xsens-tf-bridge.cpp)
target_link_libraries(xsens-tf-bridge ${YARP_LIBRARIES} thriftLibrary YARP::YARP_OS)
target_include_directories(xsens-tf-bridge SYSTEM PUBLIC include ${THRIFT_INCLUDE_DIRS} ${THRIFT_SERVICE_INCLUDE_DIRS} ${YARP_INCLUDE_DIRS})

